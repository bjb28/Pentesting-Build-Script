#!/bin/bash

#Link pip to pip3
ln -s /usr/bin/pip3 /usr/bin/pip

#Weird LIBC6 error fix -required prior to upgrading Kali 2020..
yes Y | sudo apt-get install gcc-9-base libgcc-9-dev libc6-dev;


#Update Kali before starting
echo -e  '\e[1;34m'"{::Starting Kali update before installs::}"'\e[0m'
sudo apt-get update && sudo apt-get -y upgrade && sudo apt-get -y dist-upgrade && sudo apt-get -y autoclean && sudo apt-get -y autoremove


#Build Tools Directories (both in root and OPT depending on user preference)
echo -e  '\e[1;34m'"{::Creating linked Tool directories ~/Tools and /OPT/Tools::}"'\e[0m'
mkdir -p /opt/Tools

#Install Sublime Text Editor
echo -e  '\e[1;34m'"{::Installing Sublime Text Editor::}"'\e[0m'
wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
sudo apt-get -y install apt-transport-https
echo -e  "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
sudo apt-get -y update && sudo apt-get -y install sublime-text


#Install Terminator
echo -e  '\e[1;34m'"{::Installing Terminator::}"'\e[0m'
apt-get -y install terminator


# Git Clones of Tools
echo -e  '\e[1;34m'"{::Performing GIT clones of tools from GitHub::}"'\e[0m'
cd /opt/Tools
git clone https://github.com/Tib3rius/AutoRecon.git
git clone https://github.com/samratashok/nishang.git
git clone https://github.com/3ndG4me/AutoBlue-MS17-010.git
git clone https://github.com/BC-SECURITY/Empire.git
git clone https://github.com/PowerShellMafia/PowerSploit.git
git clone https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite.git
git clone https://github.com/rasta-mouse/Sherlock.git
git clone https://github.com/rasta-mouse/Watson.git
git clone https://github.com/sleventyeleven/linuxprivchecker.git
git clone https://github.com/411Hall/JAWS.git
git clone https://github.com/SecureAuthCorp/impacket.git
git clone https://github.com/vulnersCom/nmap-vulners.git
git clone https://github.com/swisskyrepo/PayloadsAllTheThings.git
git clone https://github.com/BloodHoundAD/BloodHound.git
git clone https://github.com/ropnop/kerbrute.git
git clone https://github.com/rebootuser/LinEnum.git
git clone https://github.com/AonCyberLabs/Windows-Exploit-Suggester.git
git clone https://github.com/maurosoria/dirsearch.git
git clone https://github.com/D35m0nd142/LFISuite.git
git clone https://github.com/mdsecactivebreach/SharpShooter.git
git clone https://github.com/nccgroup/demiguise.git
git clone https://github.com/vysecurity/morphHTA.git
git clone https://github.com/Kevin-Robertson/Inveigh.git
git clone https://github.com/noahpowers/nlzr.git
git clone https://github.com/noahpowers/ServerSetup.git
git clone https://github.com/jasonjfrank/gnmap-parser.git
git clone https://github.com/GhostPack/SharpDPAPI.git
git clone https://github.com/GhostPack/Seatbelt.git
git clone https://github.com/GhostPack/Rubeus.git
git clone https://github.com/GhostPack/SharpWMI.git
git clone https://github.com/GhostPack/Lockless.git
git clone https://github.com/GhostPack/Sharpup.git
git clone https://github.com/GhostPack/SafetyKatz.git
git clone https://github.com/GhostPack/SharpDump.git
git clone https://github.com/GhostPack/SharpRoast.git
git clone https://github.com/mdsecactivebreach/CACTUSTORCH.git
git clone https://github.com/Techno-Hwizrdry/checkpwnedemails.git
git clone https://github.com/bovine/datapipe.git
git clone https://github.com/nccgroup/demiguise.git
git clone https://github.com/maurosoria/dirsearch.git
git clone https://github.com/sixdub/DomainTrustExplorer.git
git clone https://github.com/ChrisTruncer/Egress-Assess.git
git clone https://github.com/MacR6/ftpenum.git
git clone https://github.com/ChrisTruncer/gnmap-parser.git
git clone https://github.com/FortyNorthSecurity/Hasher.git
git clone https://github.com/HarmJ0y/ImpDump.git
git clone https://github.com/eladshamir/Internal-Monologue.git
git clone https://github.com/HarmJ0y/KeeThief.git
git clone https://github.com/xan7r/kerberoast.git
git clone https://github.com/ChrisTruncer/mikto.git
git clone https://github.com/xan7r/Misc.git
git clone https://github.com/vysecurity/morphHTA.git
git clone https://github.com/worawit/MS17-010.git
git clone https://github.com/noahpowers/nlzr.git
git clone https://github.com/PowerShellEmpire/PowerTools.git
git clone https://github.com/NetSPI/PowerUpSQL.git
git clone https://github.com/xorrior/RandomPS-Scripts.git
git clone https://github.com/Arvanaghi/SessionGopher.git
git clone https://github.com/mubix/shellshocker-pocs.git
git clone https://github.com/SimplySecurity/SimplyEmail.git
git clone https://github.com/SimplySecurity/SimplyTemplate.git
git clone https://github.com/MacR6/sshenum.git
git clone https://github.com/rasta-mouse/TikiTorch.git
git clone https://github.com/frohoff/ysoserial.git

# Apt dependency installs
echo -e  '\e[1;34m'"{::Installing tools/dependencies avaliable with APT::}"'\e[0m'
echo -e  '\e[1;34m'"{:seclists curl bloodhound enum4linux gobuster nbtscan nikto:]\e[0m" 
echo -e  '\e[1;34m'"{:nmap onesixtyone oscanner smbclient smbmap smtp-user-enum sslscan tnscmd10g whatweb:]\e[0m"
sudo apt-get -y install crackmapexec bless eyewitness seclists curl bloodhound enum4linux gobuster nbtscan nikto nmap onesixtyone oscanner smbclient smbmap smtp-user-enum sslscan tnscmd10g whatweb mimikatz powershell-empire powersploit responder sublist3r
pip3 install mitm6

# AutoRecon Specific install
echo -e  '\e[1;34m'"{::Installing AutoRecon python dependencies::}"'\e[0m'
pip3 install -r /opt/Tools/AutoRecon/requirements.txt


# Installing Empire V3
echo -e  '\e[1;34m'"{::Installing Empire V3::}"'\e[0m'
pushd /opt/Tools/Empire
echo -e  "password" | bash "./setup/install.sh"
popd


# Extracting Bloodhound
echo -e  '\e[1;34m'"{::Extracting Bloodhound Ingestors::}"'\e[0m'
pushd /opt/Tools/BloodHound/
rm *.*
mv ./Ingestors/*.* ./
rm -rf Ingestors src 
rm BloodHoundExampleDB.graphdb
popd


# Install Veil Evasion
echo -e  '\e[1;34m'"{::Installing Veil 3.0::}"'\e[0m'
apt-get -y install veil
/usr/share/veil/config/setup.sh --force --silent 2> /dev/null


# Install Nmap Vulners script
echo -e  '\e[1;34m'"{::Copying Vulners.nse to Nmap Scripts directory and update db::}"'\e[0m'
cp /opt/Tools/nmap-vulners/vulners.nse /usr/share/nmap/scripts
nmap --script-updatedb


#Extract Rockyou
echo -e  '\e[1;34m'"{::Extracting Rockyou::}"'\e[0m'
gzip -d /usr/share/wordlists/rockyou.txt.gz


# Update WPScan and Searchsploit
echo -e  '\e[1;34m'"{::Updating WPScan::}"'\e[0m'
wpscan --update
echo -e  '\e[1;34m'"{::Updating Searchsploit::}"'\e[0m'
searchsploit --update

#CPT Super User Creation
echo ‘CPT User Creation’;
sudo useradd -mp $(openssl passwd -1 1337P@ss) user;
sudo usermod -s /bin/bash user
sudo usermod -aG sudo user;

#echo ‘/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/‘;
#echo ‘CHANGE THE PASSWORD NOW!!!!!!!!!!!’;
#echo ‘/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/‘;
#sudo passwd user;

#creating pastable file (This generates a file tree map of /usr/share/wordlists for easy
#cutting and pasting into xyz tool for input...




