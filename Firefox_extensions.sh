#! /bin/bash

# Written for 1790 CPT.
# IT1 Christopher R. Sundeen

# ------------------------------------------------------------------------------
# INFORMATION
# ------------------------------------------------------------------------------

# FIREFOX EXTENSIONS DIRECTORY: /home/*/.mozilla/firefox/*/extensions/

# ------------------------------------------------------------------------------
# NAME:                                   ID:
# ------------------------------------------------------------------------------
# Cookie-Editor				{c3c10168-4186-445c-9c5b-63f12b8e2c87}
# Disable JavaScript			{41f9e51d-35e4-4b29-af66-422ff81c8b41}
# FoxyProxy Standard			foxyproxy@eric.h.jung
# QRScanner				qrscaner@laobubu.net
# User-Agent Switcher and Manager	{a6c4a591-f1b2-4f03-b3ff-767e5bedf4e7}
# Wappalyzer				wappalyzer@crunchlabz.com
# X-Forwarded-For Header		{9e00ccd0-bf33-4038-929d-833a4b8d723b}
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# SCRIPT
# ------------------------------------------------------------------------------

# Find and store location of extenstions
ffloc=$(cat "$HOME/.mozilla/firefox/profiles.ini" | sed -n -e 's/^.*Path=//p' | head -n 1)


CookieEditor="$HOME/.mozilla/firefox/$ffloc/extensions/{c3c10168-4186-445c-9c5b-63f12b8e2c87}.xpi"
DisableJavascript="$HOME/.mozilla/firefox/$ffloc/extensions/{41f9e51d-35e4-4b29-af66-422ff81c8b41}.xpi"
FoxyProxy="$HOME/.mozilla/firefox/$ffloc/extensions/foxyproxy@eric.h.jung.xpi"
QRScanner="$HOME/.mozilla/firefox/$ffloc/extensions/qrscaner@laobubu.net.xpi"
UASwitcher="$HOME/.mozilla/firefox/$ffloc/extensions/{a6c4a591-f1b2-4f03-b3ff-767e5bedf4e7}.xpi"
Wappalyzer="$HOME/.mozilla/firefox/$ffloc/extensions/wappalyzer@crunchlabz.com.xpi"
XForwardFor="$HOME/.mozilla/firefox/$ffloc/extensions/{9e00ccd0-bf33-4038-929d-833a4b8d723b}.xpi"

#### BEGIN SCRIPT ####

echo -e '\e[1;31m'"{::\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\::}"'\e[0m'
echo -e '\e[1;31;43m'"DO NOT TOUCH MOUSE OR KEYBOARD DURING INSTALL!!!!"'\e[0m'
echo -e '\e[1;31m'"{::\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\::}"'\e[0m'

# Cookie-Editor

if [[ ! -f $CookieEditor ]]
then

	echo -e  '\e[1;32m'"{::Installing Cookie-Editor::}"'\e[0m'
	firefox https://addons.mozilla.org/firefox/downloads/file/2209736/cookie_editor-1.9.0-an+fx.xpi?src=dp-btn-primary 2>/dev/null &
	sleep 10 && xdotool key alt+a && sleep 3 && xdotool key alt+o && sleep 3 && xdotool key ctrl+q &
	wait
else
	echo -e  '\e[1;32m'"{::Cookie-Editor Already Installed!::}"'\e[0m'
fi

# Disable JavaScript
if [[ ! -f $DisableJavascript ]]
then
	echo -e  '\e[1;32m'"{::Installing Disable JavaScript::}"'\e[0m'
	firefox https://addons.mozilla.org/firefox/downloads/file/1090623/disable_javascript-2.3.1-an+fx.xpi?src=dp-btn-primary 2>/dev/null &
	sleep 10 && xdotool key alt+a && sleep 3 && xdotool key alt+o && sleep 3 && xdotool key ctrl+q && sleep 3 && xdotool key KP_Enter &
	wait
else
	echo -e  '\e[1;32m'"{::Disable Javascript Already Installed!::}"'\e[0m'
fi

# FoxyProxy Standard
if [[ ! -f $FoxyProxy ]]
then
	echo -e  '\e[1;32m'"{::Installing FoxyProxy::}"'\e[0m'
	firefox https://addons.mozilla.org/firefox/downloads/file/3616824/foxyproxy_standard-7.5.1-an+fx.xpi?src=dp-btn-primary 2>/dev/null &
	sleep 10 && xdotool key alt+a && sleep 3 && xdotool key alt+o && sleep 3 && xdotool key ctrl+q && sleep 3 && xdotool key KP_Enter &
	wait
else
	echo -e  '\e[1;32m'"{::FoxyProxy Already Installed!::}"'\e[0m'
fi

# QRScanner
if [[ ! -f $QRScanner ]]
then
	echo -e  '\e[1;32m'"{::Installing QRScanner::}"'\e[0m'
	firefox https://addons.mozilla.org/firefox/downloads/file/642981/qrcode_scanner-1.2.3-an+fx.xpi?src=dp-btn-primary 2>/dev/null &
	sleep 10 && xdotool key alt+a && sleep 3 && xdotool key alt+o && sleep 3 && xdotool key ctrl+q &
	wait
else
	echo -e  '\e[1;32m'"{::QRScanner Already Installed!::}"'\e[0m'
fi

# User-Agent Switcher and Manager
if [[ ! -f $UASwitcher ]]
then
	echo -e  '\e[1;32m'"{::Installing User-Agent Switcher and Manager::}"'\e[0m'
	firefox https://addons.mozilla.org/firefox/downloads/file/3622799/user_agent_switcher_and_manager-0.4.1-an+fx.xpi?src=dp-btn-primary 2>/dev/null &
	sleep 10 && xdotool key alt+a && sleep 3 && xdotool key alt+o && sleep 3 && xdotool key ctrl+q && sleep 3 && xdotool key KP_Enter &
	wait
else
	echo -e  '\e[1;32m'"{::User-Agent Switcher and Manager Already Installed!::}"'\e[0m'
fi

# Wappalyzer
if [[ ! -f $Wappalyzer ]]
then
	echo -e  '\e[1;32m'"{::Installing Wappalyzer::}"'\e[0m'
	firefox https://addons.mozilla.org/firefox/downloads/file/3618861/wappalyzer-6.2.3-fx.xpi?src=dp-btn-primary 2>/dev/null &
	sleep 10 && xdotool key alt+a && sleep 3 && xdotool key alt+o && sleep 3 && xdotool key ctrl+q && sleep 3 && xdotool key KP_Enter &
	wait
else
	echo -e  '\e[1;32m'"{::Wappalyzer Already Installed!::}"'\e[0m'
fi

# X-Forwarded-For Header
if [[ ! -f $XForwardFor ]]
then
	echo -e  '\e[1;32m'"{::Installing X-Forwarded-For::}"'\e[0m'
	firefox https://addons.mozilla.org/firefox/downloads/file/3597612/x_forwarded_for_header-0.6.2-fx.xpi?src=dp-btn-primary 2>/dev/null & 
	sleep 10 && xdotool key alt+a && sleep 3 && xdotool key alt+o && sleep 3 && xdotool key ctrl+q &
	wait
else
	echo -e  '\e[1;32m'"{::X-Forwarded-For Already Installed!::}"'\e[0m'
fi

# Manual Verification
echo -e '\e[1;34m'"{::\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\::}"'\e[0m'
echo -e  '\e[1;97m'"Close Firefox when verification complete"'\e[0m'
echo -e '\e[1;34m'"{::\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\::}"'\e[0m'
firefox about:addons 2>/dev/null &
